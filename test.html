<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        #img {
            position: relative;
            height: calc(100% - 110px) !important;
            width: calc(100% - 248px) !important;
        }

        /* .img {
            width: 1670px;
            height: 1670px;
        } */
    </style>
</head>

<body>

    <!-- <img src="./docs/.vuepress/dist/test-img/下载.png" alt="" class="img"> -->
    <canvas id="cs"></canvas>

    <script>
        // function combine() {
        //     let arr = [].concat.apply([], arguments)
        //     console.log(arguments);
        //     return Array.from(new Set(arr))
        // }

        // let m = [1, 2, 3],
        //     n = [2, 3, 4]
        // console.log(combine(m, n))

        // let arr = [1,2,3]
        // let obj = {foo:[123,123],arr}
        // let newArr = arr.concat(obj)

        // obj = []
        // console.log(newArr);

        // const fn = arr => arr < 40
        // const arr = [1,2,3]
        // console.log(arr.every(item => item < 0));

        // const arr = [1,2,3,4,5]
        // const newArr = arr.filter(item => item >3) 
        // console.log(newArr);

        // const arr = [5,10,20,25]
        // const found = arr.find(item => item > 10)

        // const arr1 = [{value:1},{value:2},{value:3}]
        // const foundObj1 = arr1.find(item => item.value === 3)
        // console.log(foundObj1);

        // const arr = [1,[2,3],[4,5,{value:1},[6,7,[8,9]]]]
        // const newArr = arr.flat(5)
        // console.log(newArr);

        // const arr = [1,2,[3,4]]
        // let newArr = arr.reduce((acc,val) => acc.concat(val),[])
        // let flatened = arr => [].concat(...arr)
        // console.log(flatened(arr));

        // let arr = [1,2,3]
        // arr.forEach(item => item= item*2)
        // console.log(arr);

        // const arr = [1,2,3]
        // // console.log(arr.indexOf(2));
        // const newArr = arr.map(item => item *2)
        // console.log(newArr);

        // const map = Array.prototype.map
        // let a = map.call('Hello world', x => x.charCodeAt(0))
        // console.log(a);
        // const arr = [1,2,3]
        // const pop = arr.pop()
        // console.log(arr,pop);

        // const arr = [1,2,3]
        // const len = arr.push(4,5,6)
        // console.log(arr,len);
        // const sum = [1,2,3,4].reduce((prev,curr) => prev + curr)
        // console.log(sum);

        // const arr = [1,2,3,4]
        // // arr.reverse()
        // const shift = arr.shift()
        // console.log(arr,shift);

        // const arr = [1,2,3,4]
        // while((i = arr.shift()) !== undefined) {
        //     console.log(i,arr)
        // }

        // const arr = [1,2,3,4,5]
        // const even = arr.some(item => item % 2 === 0)
        // console.log(even)

        // const arr = [2,1,10,4,3]
        // arr.sort((a,b) => a - b)
        // console.log(arr);

        // const str = ['b','p','i','t']
        // str.sort()
        // console.log(str);


        // const arr = [1, 30, 4, 21, 100000]
        // arr.sort((a,b) => a - b) // [1,2,3,4,10]

        // console.log(arr);

        // let arr = [1,2,3,4,5]
        // let splice = arr.splice(1,0,6)
        // let del = arr.splice(3)
        // console.log(del,arr);

        // const arr = [1,'a',new Date()]
        // const localeString = arr.toLocaleString()
        // console.log(localeString,arr);

        // const arr = [1,2,'a',{value:1},function(){return 1+1},null]
        // let str = arr.toString()
        // console.log(str);

        // const arr = [1,2,3]
        // arr.unshift([0,1,2])
        // console.log(arr);

        // const arr = ['a','b','c']
        // let val = arr.values()
        // console.log(val);

        // for (const values of val) {
        //         console.log(values)
        // }

        // const num = [5,6,1,2]
        // const max = Math.max.apply(null, num)
        // console.log(max);

        // const arr1 = [1,2,3]
        // const arr2 = ['a','b','c']
        // arr1.push.apply(arr1,arr2)
        // console.log(arr1) //  [1, 2, 3, "a", "b", "c"]

        // Function.prototype.myCall = function(context, ...arg) {
        //     const fn = Symbol('临时属性')
        //     context[fn] = this
        //     context[fn](...arg)
        //     delete context[fn]
        // }

        // const module = {
        //     x: 42,
        //     getX() {
        //         return this.x
        //     }
        // }

        // const test = module.getX
        // console.log(test());

        // const boundGetX = test.bind(module)
        // console.log(boundGetX());

        // function Product(name, price) {
        //     this.name = name
        //     this.price = price
        // }

        // function Food(name, price) {
        //     Product.call(this, name, price)
        //     this.category = 'food'
        // }

        // console.log(new Food('cheese',5))

        // const colors = [
        //     {id:1,title:'red',rating:3},
        //     {id:2,title:'blue',rating:4},
        //     {id:3,title:'pink',rating:5},
        //     {id:4,title:'white',rating:6},
        // ]


        // const hashColors = colors.reduce(
        //     (hash,{id,title,rating}) =>{
        //         hash[id] = { title, rating}
        //         return hash
        //     },
        //     {}
        // )

        // console.log(hashColors);

        // const userLogs = userName => message => console.log(`${userName} -> ${message}`)

        // const log = userlog('grandpa23')

        // log('attempted to load 20 fake members')

        // const countdown = (value) => {
        //     console.log(value);
        //     return value > 0 ? countdown(value-1) : value
        // }

        // countdown(10)

        // var mother = {
        //     a: 1,
        //     b: 2
        // }

        // var daughter = Object.create(mother)

        // daughter.b += 2

        // // console.log(mother.b, 'mother')
        // // console.log(daughter.b, 'daughter')

        // var inNull = Object.create(null)
        // console.log(inNull)

        // let a = [
        //     {money: 20.1, value: 1360, text: '11'},
        //     {money: 10.21, value: 1330, text: '21'},
        //     {money: 40, value: 1321, text: '14'},
        // ]


        // *
        //     1.reduce遍历a的每个元素
        //     2.传入初始对象{money:0}
        //     3.获取初始对象的key，返回一个由初始对象key组成的伪数组
        //     4.遍历由key组成的伪数组
        //     5.将数组a中与初始对象key对应的属性相加覆盖并存储到初始对象p
        //     6.返回对象p


        // let b = a.reduce((p, c) => {
        //     Object.keys(p).forEach(k => p[k] += c[k])
        //     return p
        // }, {money: 0})

        // console.log(b)


        // 实现一个方法
        // function useRetryable(fn, time) {
        // let isErr = undefined

        // console.log('useRetryable执行了' + time + '次')

        // try {
        //     fn()
        //     console.log('fn执行结束')
        //     return fn
        // }catch(err) {
        //     isErr = err
        // }
        // const fnQueue = Array(time).fill(fn)
        // // console.log(fnQueue, 'fnQueue')

        // for(let i = 0; i < fnQueue.length; i++) {
        //     // console.log(fnQueue[i]())
        //     // try {
        //         // if(fnQueue[i]())
        //          fnQueue[i]()
        //     // }

        // }

        // if(isErr && time > 0) {
        //     return useRetryable(fn, time -1)
        // }else if(isErr && time <= 0){
        //     throw new Error(isErr)
        // }

        // new Promise((resolve, reject) => {
        //     if(fn()) {
        //         resolve(fn)
        //     }else {
        //         reject(err)
        //     }


        // }).then(res => {
        //     console.log(res)
        // })

        // promiseFn.then(() => {
        //     console.log('then')
        // }).catch(reason => {
        //     if(reason && time > 0) {
        //         return useRetryable(fn, time -1)
        //     }else if(reason && time <= 0){
        //         throw new Error(reason)
        //     }
        // })

        // }


        // const testFn = () => setTimeout(()=> {console.log('异步')}, 1000)
        // const testFn = () => setTimeout(()=> {throw new Error('抛出错误-异步')}, 1000)
        // const testFn = () =>  { throw new Error('抛出错误')}

        // useRetryable(testFn, 3)
        // const retryableFn = useRetryable(testFn, 3)

        // console.log(retryableFn, 'retryableFn')

        /**
            当调用retryableFn时，它的调用方式要与原始函数（Fn）保持一致。同时还具备重试功能
            1. 如果n次内执行失败，进行重试
            2. 一旦执行成功，不再执行多余的次数
            3. 如果n次全部失败，抛出最后一次的异常
        
            */

        // retryableFn()

        canvas.getContext('2d') // 获取渲染上下文
        const cs = document.getElementById('cs')
        




    </script>

<!--     <script>
        const cs = document.getElementById('img')
        cs.width = window.innerWidth

        let imgObj = new Image()
        imgObj.src = './docs/.vuepress/dist/test-img/下载.png'

        imgObj.onload = function () {
            let ctx = cs.getContext('2d')
            ctx.drawImage(this, 0, 0)
        }
    </script> -->

</body>

</html>